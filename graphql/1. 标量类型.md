# 标量类型

标量([ScalarTypeDefinition](https://facebook.github.io/graphql/June2018/#ScalarTypeDefinition))是 GraphQL 中不可分割的原子数据类型，在服务中充当叶子节点。对于客户端而言，合法的查询集(Select Set)必须到达叶子节点，也就是到达标量类型节点。

GraphQL 规范提供了五种标量：

1. [Int](https://facebook.github.io/graphql/June2018/#sec-Int): 32 位有符号整型，超出精度范围后，引擎会抛出异常
2. [Float](https://facebook.github.io/graphql/June2018/#sec-Float): 有符号双精度浮点数，超出精度范围后，引擎会抛出异常
3. [String](https://facebook.github.io/graphql/June2018/#sec-String): 字符串，用于表示 `UTF-8` 字符序列
4. [Boolean](https://facebook.github.io/graphql/June2018/#sec-Boolean): bool 值
5. [ID](https://facebook.github.io/graphql/June2018/#sec-ID): 资源唯一标志符

上述五种类型与其他语言对应的类型定义相似，相信读者老爷们都已经非常熟悉，无需赘述，下面我们来说一些特别的点：

## 1. ID 特性

`ID` 类型比较特殊，值得多说几句。第一，表现上 `ID` 类型只是一个字符串格式的值，引擎支持字符串解析值，也支持将 `Int` 解析值转换为字符串类型；第二，语义上"`ID`" 类型应该用于唯一标志一个资源对象，也就是说，使用相同 ID 值，无论查询多少次，结果都应该是同一对象，这一点有助于实现缓存，是 GraphQL 推荐的缓存方案；第三，引擎并不限制解析值的唯一性，查询结果包含多个 ID 值相同的节点是合法的。我们来看一下例子加深印象：

```Javascript
[
 // 字符串类型
 {id: '1'},
 // int 类型，引擎会将其转换为字符串
 // 客户端收到的永远是字符串类型
 {id: 1},
 // float 类型
 // 非法值，引擎不支持float转换
 // 将抛出 `TypeError` 错误
 {id: 1.2},
 // 与上面第一条重复
 // 合法值，引擎并不强制 `ID` 值的唯一性
 {id: '1'}
]
```

## 2. 自定义标量类型

除规范定义的标量外，我们也可以按需定义业务范畴内的标量。语法非常简单：

```GraphQL
scalar Time
```

注意，这只是语义范畴定义，在 SDL 之外还需要定义解析、序列化、验证等函数，可以参考 [graphql-type-datetime](https://github.com/waitandseeagency/graphql-type-datetime/blob/master/src/index.js) 项目。

## 2. 扩展

可以通过 `extend` 语句扩展已有的标量类型：

```GraphQL
extend scalar Time @directives
```

扩展功能可以在已有标量上添加指令，一般业务开发中用的并不多，我们会在后面“指令”一节详细描述。
